<style>
    /* Asegura que los dropdowns de filtros se muestren sobre la botonera */
    #zona-filtro {
        overflow: visible;
    }

    #zona-filtro .bootstrap-select .dropdown-menu {
        z-index: 9999; /* asegurar que quede siempre sobre la botonera y otros elementos */
    }
</style>

<h2 class="mb-4"><i class="fas fa-file-alt"></i> Solicitudes</h2>

<!-- Resumen de solicitudes del solicitante -->
<div class="row mb-4" id="resumen-solicitante"></div>

<div class="row mb-4">
    <div class="col-12">
        <div class="btn-group mt-1" id="zona-botonera-filtro" role="group" aria-label="Botonera">
            <button id="showHideFilter" class="btn btn-secondary collapsed" type="button" data-toggle="collapse" data-target="#zona-filtro" aria-expanded="false" aria-controls="zona-filtro">
                <i class="fa fa-filter mr-2 text-white" aria-hidden="true"></i>
                Mostrar filtro
            </button>
            <button id="clearFilter" class="btn btn-outline-dark" type="button" onclick="limpiarFiltros()">
                <i class="fas fa-broom mr-2" aria-hidden="true"></i>
                <span>Limpiar filtro</span>
            </button>
        </div>
    </div>
</div>

<div class="row mb-4">
    <div class="col-12">
        <div class="card collapse" id="zona-filtro">
            <div class="card-header bg-primary text-white">
                <h5 class="mb-0">Filtros de B√∫squeda</h5>
            </div>
            <div class="card-body">
                <div class="row">
                    <div class="col-md-3">
                        <div class="form-group">
                            <label>Instalaci√≥n GM</label>
                            <select
                                class="form-control selectpicker"
                                id="filtroInstalacionGMSolic"
                                multiple
                                data-actions-box="true"
                                data-live-search="true"
                                data-container="body"
                                data-none-selected-text="Todas las instalaciones">
                                <option value="">Todas</option>
                                <option value="Santiago Solar">Santiago Solar</option>
                                <option value="Nueva Renca">Nueva Renca</option>
                                <option value="Los Vientos">Los Vientos</option>
                                <option value="Santa Lidia">Santa Lidia</option>
                                <option value="CEME1">CEME1</option>
                            </select>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="form-group">
                            <label>Instalaciones/Equipos a intervenir</label>
                            <input type="text" class="form-control" id="filtroEquiposSolic" placeholder="Buscar equipos...">
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="form-group">
                            <label>Tipo Intervenci√≥n</label>
                            <select class="form-control" id="filtroTipoIntervencionSolic">
                                <option value="">Todos</option>
                                <option value="Intervenci√≥n">Intervenci√≥n</option>
                                <option value="Desconexi√≥n">Desconexi√≥n</option>
                            </select>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="form-group">
                            <label>Riesgo</label>
                            <select class="form-control" id="filtroRiesgoSolic">
                                <option value="">Todos</option>
                                <option value="Bajo">Bajo</option>
                                <option value="Medio">Medio</option>
                                <option value="Alto">Alto</option>
                            </select>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-3">
                        <div class="form-group">
                            <label>Aplica SODI</label>
                            <select class="form-control" id="filtroAplicaSODISolic">
                                <option value="">Todos</option>
                                <option value="S√≠">S√≠</option>
                                <option value="No">No</option>
                            </select>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="form-group">
                            <label>Fecha Inicio Programada Desde</label>
                            <input type="date" class="form-control" id="filtroFechaDesdeSolic">
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="form-group">
                            <label>Fecha Inicio Programada Hasta</label>
                            <input type="date" class="form-control" id="filtroFechaHastaSolic">
                        </div>
                    </div>
                </div>
                <div class="btns-accion-filtro d-flex align-items-center">
                    <a href="javascript:;" class="btn-filtrar text-decoration-none mr-3" onclick="aplicarFiltrosSolic()">
                        <i class="fas fa-filter"></i> Filtrar
                    </a>
                    <a href="javascript:;" class="btn-limpiar text-decoration-none" onclick="limpiarFiltrosSolic()">
                        <i class="fas fa-eraser"></i> Limpiar
                    </a>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="row mb-4 align-items-center">
    <div class="col-lg-6">
        <div class="botonera d-flex align-items-center">
            <a class="btn btn-customized" href="javascript:;" role="button" onclick="abrirModalNuevaSolicitudSolic()" id="btn-newDoc">
                <i class="fa fa-plus"></i> Nueva Solicitud
            </a>
            <a class="btn btn-success ml-2" href="javascript:;" role="button" id="btn-descargar-excel-solic">
                <i class="fas fa-file-excel"></i> Descargar Excel Vinculado
            </a>
        </div>
    </div>
    <div class="col-lg-6 col-md-6 col-sm-12">
        <div class="row justify-content-end">
            <div class="form-group col-lg-3 col-md-3 col-sm-3 mb-0">
                <div class="input-group">
                    <div class="input-group-prepend">
                        <div class="input-group-text">
                            <input class="cbxFilter" type="radio" aria-label="" name="flexRadioDefault" checked="" id="cbxEnProceso" autocomplete="off" onchange="filtrarPorEstado('proceso')">
                        </div>
                    </div>
                    <input type="text" class="form-control" disabled="" aria-label="" value="En Proceso" autocomplete="off">
                </div>
            </div>
            <div class="form-group col-lg-3 col-md-3 col-sm-3 mb-0">
                <div class="input-group">
                    <div class="input-group-prepend">
                        <div class="input-group-text">
                            <input class="cbxFilter" type="radio" aria-label="" name="flexRadioDefault" id="cbxFinalizadas" autocomplete="off" onchange="filtrarPorEstado('finalizadas')">
                        </div>
                    </div>
                    <input type="text" class="form-control" disabled="" aria-label="" value="Finalizadas" autocomplete="off">
                </div>
            </div>
            <div class="form-group col-lg-3 col-md-3 col-sm-3 mb-0">
                <div class="input-group">
                    <div class="input-group-prepend">
                        <div class="input-group-text">
                            <input class="cbxFilter" type="radio" aria-label="" name="flexRadioDefault" id="cbxTodas" autocomplete="off" onchange="filtrarPorEstado('todas')">
                        </div>
                    </div>
                    <input type="text" class="form-control" disabled="" aria-label="" value="Todas" autocomplete="off">
                </div>
            </div>				
        </div>
    </div>
</div>

<div class="row">
    <div class="col-12">
        <div class="card">
            <div class="card-body">
                <div class="table-responsive">
                    <table id="tablaSolicitudesSolicitante" class="table table-sm table-hover table-bordered w-100">
                        <thead>
                            <tr class="table-group">
                                <th class="text-center">Acciones</th>
                                <th>ID Registro</th>
                                <th>Fecha Prog. Inicio</th>
                                <th>Fecha Prog. Fin</th>
                                <th>Instalaci√≥n GM</th>
                                <th>Instalaciones/Equipos a intervenir</th>
                                <th>Tipo Intervenci√≥n</th>
                                <th>Riesgo</th>
                                <th>Aplica SODI</th>
                                <th>Estado</th>
                            </tr>
                        </thead>
                        <tbody>
                            <!-- Las filas se cargan din√°micamente desde data/solicitudes.js mediante js/solicitante.js -->
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
// Cambiar texto del bot√≥n al colapsar/expandir
$('#zona-filtro').on('show.bs.collapse', function () {
    $('#showHideFilter').html('<i class="fa fa-filter mr-2 text-white" aria-hidden="true"></i> Ocultar filtro');
});

$('#zona-filtro').on('hide.bs.collapse', function () {
    $('#showHideFilter').html('<i class="fa fa-filter mr-2 text-white" aria-hidden="true"></i> Mostrar filtro');
});

// ============================================
// CARGAR DATOS DIN√ÅMICAMENTE DESDE solicitudesData
// ============================================
(function() {
    console.log('üîÑ Cargando solicitudes del solicitante...');
    
    // Verificar que solicitudesData existe
    if (typeof solicitudesData === 'undefined') {
        console.error('‚ùå solicitudesData no est√° definido');
        setTimeout(arguments.callee, 100); // Reintentar en 100ms
        return;
    }
    
    // Filtrar solo solicitudes creadas por solicitante
    const solicitudes = solicitudesData.filter(sol => sol.CREADO_POR === 'Solicitante');
    console.log(`üìä Encontradas ${solicitudes.length} solicitudes del solicitante`);
    
    const tbody = $('#tablaSolicitudesSolicitante tbody');
    tbody.empty(); // Limpiar tabla
    
    // Calcular resumen por estado
    const resumen = {
        totalGeneradas: solicitudes.length,
        totalDevueltas: 0,
        totalAnuladas: 0,
        totalEnProceso: 0,
        totalVigentes: 0,
        totalRechazado: 0,
        totalExtendida: 0,
        totalSuspendida: 0,
        totalFinalizadas: 0
    };

    solicitudes.forEach(sol => {
        const estado = sol.ESTADO;
        if (estado === 'Devuelta') resumen.totalDevueltas++;
        if (estado === 'No Solicitada') resumen.totalAnuladas++;
        if (['En An√°lisis', 'Administrador Gestionando', 'Programada'].includes(estado)) resumen.totalEnProceso++;
        if (estado === 'Vigente') resumen.totalVigentes++;
        if (estado === 'Rechazada') resumen.totalRechazado++;
        if (estado === 'Extendida') resumen.totalExtendida++;
        if (estado === 'Suspendida') resumen.totalSuspendida++;
        if (estado === 'Finalizada') resumen.totalFinalizadas++;
    });

    // Pintar tarjetas de resumen
    let resumenHtml = '';
    resumenHtml += `
        <div class="col-6 col-md-3 col-lg-2 mb-3">
            <div class="card text-white bg-primary h-100">
                <div class="card-body py-2">
                    <small class="d-block">Total Generadas
                        <i class="fas fa-info-circle ml-1" data-toggle="popover" data-placement="top" title="Total Generadas - A√±o en curso" data-content="Cantidad total de solicitudes creadas por el solicitante, sin filtrar por estado."></i>
                    </small>
                    <h4 class="mb-0">${resumen.totalGeneradas}</h4>
                </div>
            </div>
        </div>
        <div class="col-6 col-md-3 col-lg-2 mb-3">
            <div class="card text-white bg-warning h-100">
                <div class="card-body py-2">
                    <small class="d-block">Total Devueltas
                        <i class="fas fa-info-circle ml-1" data-toggle="popover" data-placement="top" title="Total Devueltas - A√±o en curso" data-content="Solicitudes que han sido devueltas al solicitante para correcci√≥n o ajuste."></i>
                    </small>
                    <h4 class="mb-0">${resumen.totalDevueltas}</h4>
                </div>
            </div>
        </div>
        <div class="col-6 col-md-3 col-lg-2 mb-3">
            <div class="card text-white bg-secondary h-100">
                <div class="card-body py-2">
                    <small class="d-block">Total Anuladas
                        <i class="fas fa-info-circle ml-1" data-toggle="popover" data-placement="top" title="Total Anuladas - A√±o en curso" data-content="Solicitudes marcadas como 'No Solicitada' o anuladas antes de ser gestionadas."></i>
                    </small>
                    <h4 class="mb-0">${resumen.totalAnuladas}</h4>
                </div>
            </div>
        </div>
        <div class="col-6 col-md-3 col-lg-2 mb-3">
            <div class="card text-white bg-info h-100">
                <div class="card-body py-2">
                    <small class="d-block">Total En Proceso
                        <i class="fas fa-info-circle ml-1" data-toggle="popover" data-placement="top" title="Total En Proceso - A√±o en curso" data-content="Solicitudes en estados Pendiente, En An√°lisis, Administrador Gestionando o Programada."></i>
                    </small>
                    <h4 class="mb-0">${resumen.totalEnProceso}</h4>
                </div>
            </div>
        </div>
        <div class="col-6 col-md-3 col-lg-2 mb-3">
            <div class="card text-white bg-success h-100">
                <div class="card-body py-2">
                    <small class="d-block">Total Vigentes
                        <i class="fas fa-info-circle ml-1" data-toggle="popover" data-placement="top" title="Total Vigentes - A√±o en curso" data-content="Solicitudes actualmente vigentes seg√∫n su periodo programado."></i>
                    </small>
                    <h4 class="mb-0">${resumen.totalVigentes}</h4>
                </div>
            </div>
        </div>
        <div class="col-6 col-md-3 col-lg-2 mb-3">
            <div class="card text-white bg-danger h-100">
                <div class="card-body py-2">
                    <small class="d-block">Total Rechazado
                        <i class="fas fa-info-circle ml-1" data-toggle="popover" data-placement="top" title="Total Rechazado - A√±o en curso" data-content="Solicitudes que han sido rechazadas en el flujo de aprobaci√≥n."></i>
                    </small>
                    <h4 class="mb-0">${resumen.totalRechazado}</h4>
                </div>
            </div>
        </div>
        <div class="col-6 col-md-3 col-lg-2 mb-3">
            <div class="card text-white bg-secondary h-100">
                <div class="card-body py-2">
                    <small class="d-block">Total Extendida
                        <i class="fas fa-info-circle ml-1" data-toggle="popover" data-placement="top" title="Total Extendida - A√±o en curso" data-content="Solicitudes cuyo periodo de vigencia ha sido extendido."></i>
                    </small>
                    <h4 class="mb-0">${resumen.totalExtendida}</h4>
                </div>
            </div>
        </div>
        <div class="col-6 col-md-3 col-lg-2 mb-3">
            <div class="card text-white bg-dark h-100">
                <div class="card-body py-2">
                    <small class="d-block">Total Suspendida
                        <i class="fas fa-info-circle ml-1" data-toggle="popover" data-placement="top" title="Total Suspendida - A√±o en curso" data-content="Solicitudes que han sido suspendidas temporalmente."></i>
                    </small>
                    <h4 class="mb-0">${resumen.totalSuspendida}</h4>
                </div>
            </div>
        </div>
        <div class="col-6 col-md-3 col-lg-2 mb-3">
            <div class="card text-white bg-secondary h-100">
                <div class="card-body py-2">
                    <small class="d-block">Total Finalizadas
                        <i class="fas fa-info-circle ml-1" data-toggle="popover" data-placement="top" title="Total Finalizadas - A√±o en curso" data-content="Solicitudes cuyo ciclo de vida ha terminado correctamente."></i>
                    </small>
                    <h4 class="mb-0">${resumen.totalFinalizadas}</h4>
                </div>
            </div>
        </div>
    `;

    $('#resumen-solicitante').html(resumenHtml);
    // Inicializar popovers para los indicadores
    $('#resumen-solicitante [data-toggle="popover"]').popover();
    
    // Generar cada fila
    solicitudes.forEach(solicitud => {
        // Determinar funci√≥n de ver seg√∫n el estado
        // Usar funci√≥n unificada para ver solicitudes
        const funcionVer = `verSolicitudSolic(${solicitud.ID_REGISTRO})`;
        
        // Determinar badge de riesgo
        let badgeRiesgo = 'badge-secondary';
        switch(solicitud.RIESGO) {
            case 'Bajo': badgeRiesgo = 'badge-info'; break;
            case 'Medio': badgeRiesgo = 'badge-warning'; break;
            case 'Alto': badgeRiesgo = 'badge-danger'; break;
        }
        
        // Determinar badge de estado
        let badgeEstado = 'badge-secondary';
        switch(solicitud.ESTADO) {
            case 'Pendiente': badgeEstado = 'badge-warning'; break;
            case 'Devuelta': badgeEstado = 'badge-danger'; break;
            case 'En An√°lisis': badgeEstado = 'badge-info'; break;
            case 'Administrador Gestionando': badgeEstado = 'badge-warning text-dark'; break;
            case 'Programada': badgeEstado = 'badge-success'; break;
            case 'Vigente': badgeEstado = 'badge-primary'; break;
            case 'Extendida': badgeEstado = 'badge-secondary'; break;
            case 'Finalizada': badgeEstado = 'badge-dark'; break;
            case 'Rechazada': badgeEstado = 'badge-danger'; break;
        }
        
        // Determinar acciones seg√∫n el estado
        let accionesContenido = '';
        if (['Devuelta'].includes(solicitud.ESTADO)) {
            // Estados editables para el solicitante (Devuelta)
            accionesContenido = `
                <a class="dropdown-item" href="javascript:;" onclick="abrirModalEditarSolic(${solicitud.ID_REGISTRO})">
                    <i class="fas fa-edit mr-2 text-warning"></i> Editar
                </a>
                <a class="dropdown-item" href="javascript:;" onclick="${funcionVer}">
                    <i class="fas fa-eye mr-2 text-primary"></i> Ver
                </a>
                <a class="dropdown-item" href="javascript:;" onclick="clonarSolicitudSolic(${solicitud.ID_REGISTRO})">
                    <i class="fas fa-copy mr-2 text-info"></i> Clonar
                </a>
                <a class="dropdown-item" href="javascript:;" onclick="gestionarSolicitudSolic(${solicitud.ID_REGISTRO})">
                    <i class="fas fa-arrow-circle-right mr-2 text-danger"></i> Gestionar
                </a>
                <a class="dropdown-item" href="javascript:;" onclick="abrirBitacora(${solicitud.ID_REGISTRO})">
                    <i class="fas fa-clipboard-list mr-2 text-success"></i> Bit√°cora
                </a>
            `;
        } else {
            // Estados no editables (solo ver, clonar y bit√°cora)
            accionesContenido = `
                <a class="dropdown-item" href="javascript:;" onclick="${funcionVer}">
                    <i class="fas fa-eye mr-2 text-primary"></i> Ver
                </a>
                <a class="dropdown-item" href="javascript:;" onclick="clonarSolicitudSolic(${solicitud.ID_REGISTRO})">
                    <i class="fas fa-copy mr-2 text-info"></i> Clonar
                </a>
                <a class="dropdown-item" href="javascript:;" onclick="abrirBitacora(${solicitud.ID_REGISTRO})">
                    <i class="fas fa-clipboard-list mr-2 text-success"></i> Bit√°cora
                </a>
            `;
        }

        const acciones = `
            <div class="dropdown d-inline-block">
                <button class="btn btn-sm btn-outline-secondary dropdown-toggle" type="button" id="accionesMenu${solicitud.ID_REGISTRO}"
                        data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                    <i class="fas fa-ellipsis-v"></i>
                </button>
                <div class="dropdown-menu dropdown-menu-right" aria-labelledby="accionesMenu${solicitud.ID_REGISTRO}">
                    ${accionesContenido}
                </div>
            </div>
        `;
        
        // Generar HTML de la fila
        const fila = `
            <tr>
                <td class="text-center">${acciones}</td>
                <td>${solicitud.ID_REGISTRO}</td>
                <td>${solicitud.INICIO_PROGRAMADO}</td>
                <td>${solicitud.FIN_PROGRAMADO}</td>
                <td>${solicitud.INSTALACION_GM}</td>
                <td>${solicitud.EQUIPOS}</td>
                <td>${solicitud.TIPO_INTERVENCION}</td>
                <td><span class="badge ${badgeRiesgo}">${solicitud.RIESGO}</span></td>
                <td>${solicitud.APLICA_SODI}</td>
                <td><span class="badge ${badgeEstado}">${solicitud.ESTADO}</span></td>
            </tr>
        `;
        
        tbody.append(fila);
    });
    
    console.log('‚úÖ Solicitudes cargadas exitosamente');
})();

// Encapsular TODO en una IIFE para evitar conflictos de variables
(function() {
    // Variable local para el filtro actual
    let filtroActual = 'proceso';
    
    // Inicializar selectpicker de Instalaci√≥n GM
    $(function() {
        $('#filtroInstalacionGMSolic').selectpicker();
    });
    
    // Funci√≥n para limpiar filtros (legacy)
    window.limpiarFiltros = function() {
        $('#zona-filtro select').val('');
        $('#zona-filtro input').val('');
    };
    
    // Funci√≥n para aplicar filtros personalizados
    window.aplicarFiltrosSolic = function() {
        const table = $('#tablaSolicitudesSolicitante').DataTable();
        
        // Obtener valores de filtros
        const filtroInstalacion = $('#filtroInstalacionGMSolic').val(); // ahora puede ser array
        const filtroEquipos = $('#filtroEquiposSolic').val().toLowerCase();
        const filtroTipoInterv = $('#filtroTipoIntervencionSolic').val();
        const filtroRiesgo = $('#filtroRiesgoSolic').val();
        const filtroSODI = $('#filtroAplicaSODISolic').val();
        const filtroFechaDesde = $('#filtroFechaDesdeSolic').val();
        const filtroFechaHasta = $('#filtroFechaHastaSolic').val();
        
        // Aplicar b√∫squeda por Instalaci√≥n GM (columna 4) - soporte multi selecci√≥n
        if (Array.isArray(filtroInstalacion) && filtroInstalacion.length > 0 && !filtroInstalacion.includes('')) {
            const pattern = '^(' + filtroInstalacion.join('|') + ')$';
            table.column(4).search(pattern, true, false); // regex = true, smart = false
        } else {
            table.column(4).search('');
        }
        
        // Aplicar b√∫squeda por Equipos (columna 5)
        table.column(5).search(filtroEquipos);
        
        // Aplicar b√∫squeda por Tipo Intervenci√≥n (columna 6)
        table.column(6).search(filtroTipoInterv);
        
        // Aplicar b√∫squeda por Riesgo (columna 7)
        table.column(7).search(filtroRiesgo);
        
        // Aplicar b√∫squeda por Aplica SODI (columna 8)
        table.column(8).search(filtroSODI);
        
        // Redibujar tabla
        table.draw();
        
        console.log('Filtros aplicados:', {filtroInstalacion, filtroEquipos, filtroTipoInterv, filtroRiesgo, filtroSODI});
    };
    
    // Funci√≥n para limpiar filtros personalizados
    window.limpiarFiltrosSolic = function() {
        // Limpiar inputs
        $('#filtroInstalacionGMSolic').val('');
        $('#filtroEquiposSolic').val('');
        $('#filtroTipoIntervencionSolic').val('');
        $('#filtroRiesgoSolic').val('');
        $('#filtroAplicaSODISolic').val('');
        $('#filtroFechaDesdeSolic').val('');
        $('#filtroFechaHastaSolic').val('');
        
        // Limpiar b√∫squedas de DataTable
        const table = $('#tablaSolicitudesSolicitante').DataTable();
        table.search('').columns().search('').draw();
        
        console.log('Filtros limpiados');
    };
    
    // Funci√≥n para filtrar por estado
    window.filtrarPorEstado = function(tipo) {
        console.log('Filtrando por:', tipo);
        filtroActual = tipo;
        
        const table = $('#tablaSolicitudesSolicitante').DataTable();
        
        // Aplicar el filtro y redibujar
        table.draw();
    };
    
    // Destruir DataTable si ya existe
    if ($.fn.DataTable.isDataTable('#tablaSolicitudesSolicitante')) {
        $('#tablaSolicitudesSolicitante').DataTable().destroy();
    }
    
    // Limpiar filtros personalizados anteriores
    $.fn.dataTable.ext.search = [];
    
    // Remover el display:none inline de las filas finalizadas para que DataTables las pueda procesar
    $('.solicitud-finalizada').removeAttr('style');
    
    // Estados que se consideran "En Proceso" para Solicitante
    const estadosEnProceso = ['Pendiente', 'Devuelta', 'En An√°lisis', 'Administrador Gestionando', 'Programada'];
    
    // Estados que se consideran "Finalizadas"
    const estadosFinalizadas = ['Finalizada', 'No Solicitada', 'Rechazada', 'Suspendida'];
    
    // Funci√≥n de filtro personalizada
    $.fn.dataTable.ext.search.push(
        function(settings, data, dataIndex) {
            // data[9] es la columna del Estado (√≠ndice 9, la √∫ltima columna)
            const estadoColumna = data[9]; // Contiene el HTML del badge
            
            // Extraer el texto del estado del HTML
            const tempDiv = document.createElement('div');
            tempDiv.innerHTML = estadoColumna;
            const estado = tempDiv.textContent.trim();
            
            if (filtroActual === 'proceso') {
                // Mostrar solo estados en proceso
                return estadosEnProceso.includes(estado);
            } else if (filtroActual === 'finalizadas') {
                // Mostrar solo estados finalizadas
                return estadosFinalizadas.includes(estado);
            }
            return true;
        }
    );
    
    $('#tablaSolicitudesSolicitante').DataTable({
        "language": {
            "lengthMenu": "Mostrando _MENU_ solicitudes por p√°gina",
            "zeroRecords": "No se encontraron resultados",
            "info": "Total solicitudes: _TOTAL_. Mostrando p√°gina _PAGE_ de _PAGES_",
            "infoEmpty": "No hay solicitudes disponibles",
            "infoFiltered": "(filtrado de _MAX_ solicitudes totales)",
            "search": "Buscar",
            "paginate": {
                "first": "Primero",
                "last": "√öltimo",
                "next": "Siguiente",
                "previous": "Anterior"
            }
        },
        "pageLength": 10,
        "lengthMenu": [[10, 25, 50, -1], [10, 25, 50, "Mostrar todo"]],
        "responsive": true,
        "order": [[1, "desc"]],
        "columnDefs": [
            { "orderable": false, "targets": 0 }
        ]
    });
})();
</script>

<!-- Cargar modales del solicitante -->
<script src="modals/solicitante/modals-loader.js?v=4" defer></script>
