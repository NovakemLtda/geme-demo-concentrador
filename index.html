<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Componentes GEME - Header y Sidebar</title>
    
    <!-- CDN CLOUDFARE CSS JQUERY UI -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.css" integrity="sha256-rByPlHULObEjJ6XQxW/flG2r+22R5dKiAoef+aXWfik=" crossorigin="anonymous" />
    <!-- CDN CLOUDFARE CSS BOOTSTRAP -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.4.0/css/bootstrap.min.css" integrity="sha256-/ykJw/wDxMa0AQhHDYfuMEwVb4JHMx9h4jD4XvHqVzU=" crossorigin="anonymous" />
    <!-- CDN CLOUDFARE CSS DATATABLES PLUGINS -->
    <link rel="stylesheet" href="https://cdn.datatables.net/1.10.20/css/dataTables.bootstrap4.min.css" />
    <link rel="stylesheet" href="https://cdn.datatables.net/responsive/2.2.3/css/responsive.bootstrap4.min.css" />
    <!-- CDN CLOUDFARE CSS FONTAWESOME -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css" integrity="sha512-1ycn6IcaQQ40/MKBW2W4Rhis/DbILU74C1vSrLJxCq57o941Ym01SwNsOMqvEBFlcgUa6xLiPY/NS5R+E6ztJQ==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <!-- CDN CLOUDFARE CSS trumbowyg-->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Trumbowyg/2.23.0/ui/trumbowyg.min.css" integrity="sha512-iw/TO6rC/bRmSOiXlanoUCVdNrnJBCOufp2s3vhTPyP1Z0CtTSBNbEd5wIo8VJanpONGJSyPOZ5ZRjZ/ojmc7g==" crossorigin="anonymous" />
    <!-- CDN CLOUDFARE CSS BOOTSTRAP SELECT -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-select/1.13.18/css/bootstrap-select.min.css" integrity="sha512-ARJR74swou2y0Q2V9k0GbzQ/5vJ2RBSoCWokg4zkfM29Fb3vZEQyv0iWBMW/yvKgyHSR/7D64pFMmU8nYmbRkg==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    
    <link rel="stylesheet" href="components.css?v=202501289">
    
    <!-- Datos y Helpers -->
    <script src="data/solicitudes.js?v=17" defer></script>
    <script src="data/modal-helpers.js?v=11" defer></script>
    
    <!-- COMPONENTES ORIGINALES (COMENTADO PARA PRUEBAS) -->
    <!-- <script src="components.js?v=202501334" defer></script> -->
    
    <!-- NUEVOS MÓDULOS REFACTORIZADOS -->
    <!-- Core modules (deben cargarse primero) -->
    <script src="js/utils/data-helpers.js?v=2" defer></script>
    <script src="js/utils/global-functions.js?v=15" defer></script>
    <script src="js/core/app-core.js?v=2" defer></script>
    <script src="js/core/sidebar.js?v=3" defer></script>
    
    <!-- Modal modules -->
    <script src="js/modals/tabs-manager.js?v=2" defer></script>
    <script src="js/modals/administrador-modals.js?v=8" defer></script>
    <script src="js/modals/despachador-modals.js?v=8" defer></script>
    <script src="js/modals/solicitante-modals.js?v=11" defer></script>
    
    <!-- Archivos JS de las vistas -->
    <script src="js/permisos-usuarios.js?v=3" defer></script>
    <script src="js/mantenedores.js?v=3" defer></script>
</head>
<body>
    <!-- HEADER COMPONENT -->
    <header class="header">
        <nav class="navbar navbar-expand-md navbar-light shadow fixed-top" style="background: #003773 !important;">		
            <a class="navbar-brand" href="/sites/geme/">
                <img alt="Logo GEME" src="assets/logo.png" style="height: 50px;">
            </a>
            <button class="navbar-toggler bg-white" type="button" data-toggle="collapse" data-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Botón para navegación">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarResponsive">
                <ul id="nivel1_menu" class="navbar-nav mr-auto">
                    <li class="nav-item">
                        <a class="nav-link p-2" href="javascript:;" onclick="InstanciarCamino(1, 1, '','/sites/geme');">Inicio</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link p-2 active" href="javascript:;" onclick="InstanciarCamino(1, 99, '','components.html');">Concentrador de Solicitudes</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link p-2" href="javascript:;" onclick="InstanciarCamino(1, 12, '','/sites/geme/SitePages/proveedores/index.aspx');">Adquisiciones</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link p-2" href="javascript:;" onclick="InstanciarCamino(1, 13, '','/sites/geme/SitePages/sig/Principal.aspx');">SIG</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link p-2" href="javascript:;" onclick="InstanciarCamino(1, 48, '','/sites/geme/SitePages/PNF/index.aspx');">Payment Request</a>
                    </li>
                </ul>
                <div id="indicador-mis-tareas" class="bg-transparent d-flex">
                    <div class="btn btn-primary d-flex align-items-center mr-3" style="gap: 8px;background-color:#E56000">
                        <!-- Botón de recargar contador -->
                        <div class="spinner d-none" id="spinner-cargatc">
                            <i class="fa fa-spinner spinning"></i>
                        </div>
                        <i id="btnRecargaTC" title="Recargar" class="fas fa-sync-alt text-light" style="font-size: 16px; cursor: pointer;" onclick="getCountTC()"></i>
                        
                        <!-- Texto clickeable para ir a otra página -->
                        <a onclick="irTomasConocimiento()" class="text-white" style="text-decoration: none; cursor: pointer;">
                            Mis Tomas de Conocimiento
                        </a>
                        
                        <!-- Badge contador -->
                        <span class="badge badge-light" id="countTC">3</span>
                    </div>
                    <div class="btn btn-primary d-flex align-items-center mr-3" style="gap: 8px;">
                        <!-- Botón de recargar contador -->
                        <div class="spinner d-none" id="spinner-cargatareas">
                            <i class="fa fa-spinner spinning"></i>
                        </div>
                        <i id="btnRecarga" title="Recargar" class="fas fa-sync-alt text-light" style="font-size: 16px; cursor: pointer;" onclick="getDatosTareasInit(H_filtroTareas['filtro'])"></i>
                        
                        <!-- Texto clickeable para ir a otra página -->
                        <a onclick="verMisTarea()" class="text-white" style="text-decoration: none; cursor: pointer;">
                            Mis Tareas
                        </a>
                        
                        <!-- Badge contador -->
                        <span class="badge badge-light" id="countTareas">153</span>
                    </div>
                </div>
                <div class="d-block bg-transparent">
                    <span id="span-user-name" class="text-white">
                        <i class="fa fa-user-circle mr-2"></i>Bienvenido, Demo Novakem 10
                    </span>
                    <a class="float-right ml-3" href="/sites/geme/_layouts/15/SignOut.aspx">
                        <i class="fa fa-sign-out-alt text-white"></i>
                    </a>
                </div>
            </div>
        </nav>
    </header>

    <!-- WRAPPER PARA SIDEBAR Y CONTENIDO -->
    <main class="main pt-0">
        <div class="wrapper">
            <!-- SIDEBAR COMPONENT -->
            <nav id="sidebar">
                <ul class="list-unstyled components">
                    <li>
                        <a href="javascript:void(0)" aria-expanded="false" class="dropdown-toggle">Concentrador de Solicitudes</a>
                        <ul class="collapse list-unstyled" id="subMenu1">
                            <li><a class="a-sidebar a-submenu" href="javascript:;" onclick="loadView('views/solicitante.html?v=105');">Solicitante</a></li>
                            <li><a class="a-sidebar a-submenu" href="javascript:;" onclick="loadView('views/administrador.html?v=115');">Administrador</a></li>
                            <li><a class="a-sidebar a-submenu" href="javascript:;" onclick="loadView('views/despachador.html?v=77');">Despachador</a></li>
                        </ul>
                    </li>
                    <li>
                        <a href="javascript:void(0)" aria-expanded="false" class="dropdown-toggle">Control del Sitio</a>
                        <ul class="collapse list-unstyled" id="subMenu2">
                            <li><a class="a-sidebar a-submenu" href="javascript:;" onclick="loadView('views/permisos-usuarios.html?v=16');">Permisos de Usuarios</a></li>
                            <li><a class="a-sidebar a-submenu" href="javascript:;" onclick="loadView('views/mantenedores.html?v=29');">Mantenedores</a></li>
                        </ul>
                    </li>
                </ul>
            </nav>

            <!-- CONTENIDO PRINCIPAL -->
            <div id="content">
                <div class="container-fluid pl-0">
                    <!-- Contenedor para botón de sidebar y contenido dinámico en la misma línea -->
                    <div class="d-flex align-items-start mb-3">
                        <button
                            type="button"
                            id="sidebarCollapse"
                            class="btn btn-info btn-sm mr-3"
                            style="margin-left:-40px; position: relative; z-index: 1051; width: 32px; height: 32px; border-radius: 50%; padding: 0; display: flex; align-items: center; justify-content: center;">
                            <span id="sidebarToggleIcon">&lt;</span>
                        </button>
                        <!-- CONTENEDOR DINÁMICO -->
                        <div id="dynamic-content" class="flex-grow-1">
                            <!-- Aquí se cargará el contenido dinámicamente -->
                            <h2 class="mb-4">Bienvenido al Concentrador de Solicitudes del Centro de Operación</h2>
                            <p>Selecciona una opción del menú para comenzar.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- CDN CLOUDFARE JS JQUERY -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
    <!-- CDN CLOUDFARE JS JQUERY UI -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js" integrity="sha256-KM512VNnjElC30ehFwehXjx1YCHPiQkOPmqnrWtpccM=" crossorigin="anonymous"></script>
    <!-- CDN CLOUDFARE POPPER -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
    <!-- CDN CLOUDFARE JS BOOTSTRAP -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.4.0/js/bootstrap.min.js" integrity="sha256-oKpAiD7qu3bXrWRVxnXLV1h7FlNV+p5YJBIr8LOCFYw=" crossorigin="anonymous"></script>
    <!-- CDN CLOUDFARE MOMENT -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.24.0/moment-with-locales.min.js" integrity="sha256-AdQN98MVZs44Eq2yTwtoKufhnU+uZ7v2kXnD5vqzZVo=" crossorigin="anonymous"></script>
    <!-- CDN CLOUDFARE JS COOKIE -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/js-cookie/2.2.1/js.cookie.min.js" integrity="sha256-oE03O+I6Pzff4fiMqwEGHbdfcW7a3GRRxlL+U49L5sA=" crossorigin="anonymous"></script>
    <!-- CDN CLOUDFARE JS BOOTSTRAP SELECT + IDIOMA ESPAÑOL -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-select/1.13.18/js/bootstrap-select.min.js" integrity="sha512-yDlE7vpGDP7o2eftkCiPZ+yuUyEcaBwoJoIhdXv71KZWugFqEphIS3PU60lEkFaz8RxaVsMpSvQxMBaKVwA5xg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-select/1.13.18/js/i18n/defaults-es_CL.min.js" integrity="sha512-RN/dgJo36dNkKVnb1XGzePP4/8XGa/r+On4XYUy8I1C5z+9SsIEU2rFh6TrunAnddKwtXwMdI0Se8HZxd0GtiQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <!-- CDN DATATABLE PLUGINS -->
    <script src="https://cdn.datatables.net/1.10.20/js/jquery.dataTables.min.js"></script>
    <script src="https://cdn.datatables.net/1.10.20/js/dataTables.bootstrap4.min.js"></script>
    <script src="https://cdn.datatables.net/plug-ins/1.10.20/dataRender/datetime.js"></script>
    <script src="https://cdn.datatables.net/responsive/2.2.3/js/dataTables.responsive.min.js"></script>
    <script src="https://cdn.datatables.net/plug-ins/1.10.21/sorting/datetime-moment.js"></script>
    <!-- script trumbowyg -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Trumbowyg/2.23.0/trumbowyg.min.js" integrity="sha512-sffB9/tXFFTwradcJHhojkhmrCj0hWeaz8M05Aaap5/vlYBfLx5Y7woKi6y0NrqVNgben6OIANTGGlojPTQGEw==" crossorigin="anonymous"></script>
    
    <!-- Cargador de Modales Dinámicos -->
    <script src="modals/solicitante/modals-loader.js?v=3"></script>
    <script src="modals/administrador/modals-loader.js?v=3"></script>
    <script src="modals/despachador/modals-loader.js?v=3"></script>

    <!-- Contenedor para modales dinámicos (se llenarán automáticamente) -->
    <div id="modals-container"></div>
    
    <!-- Contenedor para modales de Control del Sitio -->
    <div id="modals-control-sitio-container"></div>
    
    <script>
        // Cargar modales de Control del Sitio
        $(document).ready(function() {
            $('#modals-control-sitio-container').load('modals/control-sitio/modals-control-sitio.html');
        });
    </script>

</body>
</html>
